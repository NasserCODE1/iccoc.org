<!-- src/app/pages/home/home.html -->
<section class="section" [attr.dir]="currentDir">
  <div class="container">

    <!-- ===================== Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± (Hero Slider) ===================== -->
    <div class="hero-shell" (mouseenter)="pause()" (mouseleave)="resume()">
      <ng-container *ngFor="let s of slides; let i = index">
        <div class="bg-layer" [class.bg-active]="i === index" [style.background-image]="'url(' + s.bg + ')'">
          <div class="bg-grad" [ngClass]="s.gradient"></div>
        </div>
      </ng-container>

      <div class="hero-content">
        <a class="icon-wrap" [routerLink]="slides[index].route" [attr.aria-label]="(slides[index].titleKey | translate)">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
            <path [attr.d]="iconPath(slides[index].icon)"></path>
          </svg>
        </a>

        <h1 class="hero-title">{{ slides[index].titleKey | translate }}</h1>

        <!-- ØªÙ‚Ø¯Ø± ØªØ®Ù„ÙŠÙ‡Ø§ ÙƒØ°Ø§ Ø£Ùˆ ØªØ¶ÙŠÙ *ngIf Ù„Ùˆ Ø­Ø§Ø¨Ø¨ ØªØ®ÙÙŠÙ‡Ø§ Ù„Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…ÙØªØ§Ø­ ÙØ§Ø¶ÙŠ -->
        <p class="hero-sub" *ngIf="slides[index].subtitleKey">
          {{ slides[index].subtitleKey | translate }}
        </p>

        <!-- Ù‡Ù†Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£: *naIf â†’ *ngIf -->
        <div class="tags" *ngIf="tags.length">
          <span class="tag" *ngFor="let t of tags">{{ t }}</span>
        </div>

        <!-- ÙˆÙ‡Ù†Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£: slides[index]ctaKey â†’ slides[index].ctaKey -->
        <a class="cta-btn"
           *ngIf="slides[index].ctaKey"
           [routerLink]="slides[index].route">
          {{ slides[index].ctaKey | translate }}
        </a>

        <div class="progress">
          <div class="bar" #bar (animationend)="onProgressDone()" [style.animationPlayState]="paused ? 'paused' : 'running'"></div>
        </div>
      </div>

      <button class="nav-btn left" type="button" (click)="prev()" [attr.aria-label]="'home.prev' | translate">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>

      <button class="nav-btn right" type="button" (click)="next()" [attr.aria-label]="'home.next' | translate">
        <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>

      <div class="dots">
        <button *ngFor="let _ of slides; let i = index"
                class="dot"
                [class.active]="i === index"
                (click)="go(i)"
                [attr.aria-label]="'home.goto_slide' | translate:{ num: i + 1 }"></button>
      </div>
    </div>

    <!-- Ø§Ù„Ø¨Ø§Ù‚ÙŠ Ø¹Ù†Ø¯Ùƒ ØµØ­ÙŠØ­ ÙˆÙ…Ø§ ÙŠØ­ØªØ§Ø¬ ØªØºÙŠÙŠØ± -->
    <!-- ===================== Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù…ÙŠÙ‘Ø² (Ø«Ø§Ø¨Øª ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰) ===================== -->
    <div class="featured-report mt-24"
         *ngIf="featuredReport"
         [attr.aria-label]="(featuredReport.titleKey | translate)"
         [class.lang-rtl]="currentDir === 'rtl'"
         [class.lang-ltr]="currentDir === 'ltr'">

      <div class="thumb">
        <img [src]="featuredReport.img" [alt]="(featuredReport.titleKey | translate)"
             loading="lazy" (error)="onImgError($event)" />
      </div>

      <div class="body">
        <h3 class="title">{{ featuredReport.titleKey | translate }}</h3>
        <p class="excerpt">{{ featuredReport.excerptKey | translate }}</p>

        <div class="actions">
          <a class="btn" href="https://iccoc.eu/media" target="_blank" rel="noopener noreferrer">
            {{ 'home.more_details' | translate }}
          </a>

          <a class="btn" [routerLink]="['/reports']">
            {{ 'home.subscribe' | translate }}
          </a>
        </div>
      </div>
    </div>

    <!-- ===================== Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ===================== -->
    <div class="reports-list mt-16">
      <article class="report-card"
               *ngFor="let r of reportCards; let i = index"
               [attr.aria-label]="(r.titleKey | translate)"
               [class.lang-rtl]="currentDir === 'rtl'"
               [class.lang-ltr]="currentDir === 'ltr'"
               role="link"
               tabindex="0"
               (click)="navigateToReport(r.slug)"
               (keydown.enter)="navigateToReport(r.slug)">

        <div class="thumb">
          <img [src]="r.img" [alt]="(r.titleKey | translate)" loading="lazy" (error)="onImgError($event)" />
        </div>

        <div class="body">
          <h3 class="title">{{ r.titleKey | translate }}</h3>
          <p class="excerpt">{{ r.excerptKey | translate }}</p>

          <div class="actions">
            <span class="spacer"></span>

            <a class="btn" href="https://iccoc.eu/media" target="_blank" rel="noopener noreferrer">
              {{ 'home.more_details' | translate }}
            </a>

            <a class="btn" [routerLink]="['/reports']">
              {{ 'home.subscribe' | translate }}
            </a>
          </div>
        </div>
      </article>
    </div>

    <!-- ===================== CTA grid ===================== -->
    <div class="cta-grid mt-16">
      <div class="cta cta-blue">
        <div class="cta-icon">ğŸ’¡</div>
        <h4>{{ 'initiative.title' | translate }}</h4>
        <p>{{ 'initiative.lead' | translate }}</p>
        <a href="mailto:reporting@iccoc.eu" class="btn">reporting@iccoc.eu</a>
      </div>

      <div class="cta cta-amber">
        <div class="cta-icon">ğŸ“°</div>
        <h4>{{ 'news.subscribe_title' | translate }}</h4>
        <p>{{ 'home.welcome' | translate }}</p>
        <a class="btn" [routerLink]="'/what-we-do'">{{ 'what.title' | translate }}</a>
      </div>

      <div class="cta cta-emerald">
        <div class="cta-icon">âœ‰ï¸</div>
        <h4>{{ 'nav.contact' | translate }}</h4>
        <p>{{ 'about.mission' | translate }}</p>
        <a href="mailto:info@iccoc.org" class="btn">info@iccoc.org</a>
      </div>
    </div>

  </div>
</section>
